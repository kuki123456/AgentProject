<!DOCTYPE html>
<html>
    <head>
        <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>自定义服务</title>
        <style type="text/css">
        button{width: 80; height: 40; background-color: darkgray}
        label{font-size: 10pt}
        input{font-size: 10pt; border: darkgray solid 1pt;}
        textarea{border: darkgray solid 1pt;}
        </style>
    </head>
    <body>
        <!-- setUserId -->
        <label>userID: </label>
        <input type="text" id="memberID" value="8888666" placeholder="请输入用户id"/>
        <br/><br/>
        <button type="button" id="set_mem_id_btn" onclick="setUserId()">设置memberID</button>
        <br/><br/>
        <!-- 自定义视图begin -->
        <label>pageName: </label>
        <input type="text" id="page_start_id" value="PageName-007" placeholder="请输入pageName"/>
        <br><br/>
        <label>pageAlias: </label>
        <input type="text" id="page_start_name" value="PageAlias-magic" placeholder="请输入pageAlias"/>
        <br/><br/>
        <button type="button" id="set_cus_view_start_btn" onclick="customViewBegin()">自定义视图begin</button>
        <br/><br/>
        <!-- 自定义视图end -->
        <label>pageName: </label>
        <input type="text" id="page_end_id" value="PageName-007" placeholder="请输入pageName"/>
        <br><br/>
        <label>pageAlias: </label>
        <input type="text" id="page_end_name" value="PageAlias-magic" placeholder="请输入pageAlias"/>
        <br/><br/>
        <button type="button" id="set_cus_view_end_btn" onclick="customViewEnd()">自定义视图end</button>
        <br/><br/>
        <!-- 自定义事件 -->
        <label>eventID: </label>
        <input type="text" id="eventID" value="eventID-110" placeholder="请输入eventID"/>
        <br><br/>
        <label>eventName: </label>
        <input type="text" id="eventName" value="eventName-police" placeholder="请输入pageID"/>
        <br><br/>
        <button type="button" id="set_cus_event_btn" onclick="customEvent()">自定义事件</button>
        <br/><br/>
        <!-- 自定义Log -->
        <label>LogInfo: </label>
        <br>
        <textarea id="logInfo" style="width: 250pt;height:60pt" placeholder="请输入Log信息"></textarea>
        <br><br/>
        <label>LogParam: </label>
        <br>
        <textarea id="logParam" style="width: 250pt;height:60pt" placeholder="请输入LogParam"></textarea>
        <br><br/>
        <button type="button" id="set_cus_log_btn" onclick="customLog()">自定义Log</button>
        <br/><br/>
        <!-- 自定义指标 -->
        <label>metricName: </label>
        <input type="text" id="metricName" value="metricName-110" placeholder="请输入metricName"/>
        <br><br/>
        <label>metricValue: </label>
        <input type="text" id="metricValue" value="11" placeholder="请输入metricValue"/>
        <br><br/>
        <label>metricParam: </label>
        <input type="text" id="metricParam" placeholder="请输入metricParam"/>
        <br><br/>
        <button type="button" id="set_cus_metric_btn" onclick="customMetric()">自定义指标</button>
        <br/><br/>
        <!-- 自定义异常 -->
        <label>exceptionType: </label>
        <input type="text" id="exceptionType" value="exceptionType-110" placeholder="请输入exceptionType"/>
        <br><br/>
        <label>causedBy: </label>
        <br>
        <textarea id="causedBy" style="width: 250pt;height:60pt" placeholder="请输入causeBy"></textarea>
        <br><br/>
        <label>errorDump: </label>
        <br>
        <textarea id="errorDump" style="width: 250pt;height:60pt" placeholder="请输入LogParam"></textarea>
        <br><br/>
        <button type="button" id="set_cus_exception_btn" onclick="customException()">自定义异常</button>
        <br/><br/>
        <!-- 自定义附加信息 -->
        <label>附加信息（每个kv一行，k与v之间等号分隔): </label>
        <br>
        <textarea id="extraInfo" style="width: 250pt;height:60pt" placeholder="请输入附加信息"></textarea>
        <br><br/>
        <button type="button" id="set_extra_info_btn" onclick="customExtraInfo()">自定义附加信息</button>
<br><br/>
        <button type="button" id="setH5" onclick="customeH5()">自定义H5</button>
        <br><br/>
        <button type="button" id="setroute" onclick="setCustomRouteChangeData()">自定义路由</button>
        <script>
            document.getElementById("extraInfo").value = "a=1\nb=2\nc=3"
            document.getElementById("logInfo").value = "Custom test Log.lalalalallasjdlkfjalsdfjlasldkjfljalksjdflkjaksldj"
            document.getElementById("causedBy").value = "caused by:*** -[__NSArrayI objectAtIndexedSubscript:]: index 4 beyond bounds [0 .. 2]"
            document.getElementById("errorDump").value = "callStackSymbols: {\\n0   CoreFoundation  0x0000000185029eb8 0x0000000184f08000 + 1187512\\n1   libobjc.A.dylib  0x0000000184223f18 0x000000018421e000 + 24344\\n2   CoreFoundation  0x0000000184f9ee80 0x0000000184f08000 + 618112\\n3   CoreFoundation  0x0000000184f2d1fc 0x0000000184f08000 + 152060\\n4   demo  0x0000000100cb0c68 0x0000000100cac000 + 19560\\n5   demo  0x0000000100cf7df8 0x0000000100cac000 + 310776\\n6   UIKitCore  0x00000001b2f0f51c 0x00000001b23cd000 + 11805980\\n7   UIKitCore  0x00000001b2f0f784 0x00000001b23cd000 + 11806596\\n8   UIKitCore  0x00000001b2d003c0 0x00000001b23cd000 + 9647040\\n9   UIKitCore  0x00000001b2ced9a4 0x00000001b23cd000 + 9570724\\n10  UIKitCore  0x00000001b2d1e3b8 0x00000001b23cd000 + 9769912\\n11  CoreFoundation  0x0000000184fb7aac 0x0000000184f08000 + 719532\\n12  CoreFoundation  0x0000000184fb255c 0x0000000184f08000 + 697692\\n13  CoreFoundation  0x0000000184fb2ae0 0x0000000184f08000 + 699104\\n14  CoreFoundation  0x0000000184fb22e8 0x0000000184f08000 + 697064\\n15  GraphicsServices  0x0000000187266be8 0x000000018725c000 + 44008\\n16  UIKitCore  0x00000001b2cf4088 0x00000001b23cd000 + 9597064\\n17  demo  0x0000000100cb02cc 0x0000000100cac000 + 17100\\n18  libdyld.dylib  0x0000000184a65050 0x0000000184a64000 + 4176\\n}"
            
            function setUserId() {
                bonreeJsBridge.setUserID(document.getElementById("memberID").value)
                //bonreeJsBridge.setUserID("")
            }
            function customViewBegin() {
                let pageID = document.getElementById("page_start_id").value
                let pageName = document.getElementById("page_start_name").value
                bonreeJsBridge.setCustomPageStart("pageID", "pageName")
            }
            function customViewEnd() {
                let pageID = document.getElementById("page_end_id").value
                let pageName = document.getElementById("page_end_name").value
                bonreeJsBridge.setCustomPageEnd("pageID", "pageName")
            }
            function customEvent() {
                let eventID = document.getElementById("eventID").value
                let eventName = document.getElementById("eventName").value
                bonreeJsBridge.setCustomEvent(eventID, eventName)
            }
            function customLog() {
                let logInfo = document.getElementById("logInfo").value
                let logParam = document.getElementById("logParam").value
                bonreeJsBridge.setCustomLog(logInfo)
                //bonreeJsBridge.setCustomLog("")
            }
            function customMetric() {
                let metricName = document.getElementById("metricName").value
                let metricValue = document.getElementById("metricValue").value
                let metricParam = document.getElementById("metricParam").value
                bonreeJsBridge.setCustomMetric(metricName, metricValue)
            }
            function customException() {
                let exceptionType = document.getElementById("exceptionType").value
                let causedBy = document.getElementById("causedBy").value
                let errorDump = document.getElementById("errorDump").value
                bonreeJsBridge.setCustomException(exceptionType, causedBy, errorDump)
            }
            function customExtraInfo() {
                let text = document.getElementById("extraInfo").value
                let components = text.split("\n")
                var result = {}
                components.forEach(element => {
                    let arr = element.split("=")
                    result[arr[0]] = arr[1]
                })
                bonreeJsBridge.setExtraInfo(JSON.stringify(result))
            }
            function customeH5(){
                // var PagePerformanceTiming={
                //     "pvid":"",
                //     "url":"http://test.com/testh5" ,
                //     "imd":false,
                //     "ns":123,
                //     "ues":"-123",
                //     "uee":"98",
                //     "rds":123,
                //     "rde":123,
                //     "fs":1233,
                //     "dls":122,
                //     "dle":144,
                //     "cs":456,
                //     "scs":"345",
                //     "ce":1222,
                //     "reqs":133,
                //     "rsps":1234,
                //     "rspe":123,
                //    "dl":123,
                //     "di":67,
                //     "dcles":45,
                //     "dclee":12,
                //     "dc":12,
                //     "les":123,
                //     "lee":123,
                //     "fp":123,
                //     "fcp":123,
                //     "lcp":"-19.93"
                // }
                var PagePerformanceTiming = {
                    "pvid":"00000000-0000-0000-0000-000000000000",
                    "url":"http://we.are.chamption.com/index.html",
                    "imd":1,
                    "ns":1619061461208,
                    "ues":-1,
                    "uee":-1,
                    "rds":-1,
                    "rde":-1,
                    "fs":3,
                    "dls":5,
                    "dle":6,
                    "cs":7,
                    "scs":9,
                    "ce":12,
                    "reqs":13,
                    "rsps":15,
                    "rspe":19,
                    "dl":20,
                    "di":22,
                    "dcles":23,
                    "dclee":25,
                    "dc":26,
                    "les":26,
                    "lee":35,
                    "fp":-1,
                    "fcp":-1,
                    "lcp":-1
                };
                bonreeJsBridge.setCustomH5performanceData(JSON.stringify(PagePerformanceTiming));
            }
            function setCustomRouteChangeData(){
                var data = {
                    "al" : "123",
                    "d" : 200,
                    "fu" : "http://199.168.23.888:8888/#/",
                    "fw" : "Vuea",
                    "pt" : "/home",
                    "pu" : "http://199.168.23.888:8888/#/",
                    "rt" : "http://199.168.23.888:8888/home",
                    "sta" : 0,
                    "tu" : "http://199.168.23.888:8888/#/home"
                };
                let data1 = JSON.stringify(data);
                bonreeJsBridge.setCustomRouteChangeData(data1);
            }
        </script>
    </body>
</html>
